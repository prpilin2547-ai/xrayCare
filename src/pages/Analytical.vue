<template>
  <MainLayout>
    <div class="page">
      <h2 class="page-title">Analytical</h2>

      <!-- 1) BAR CHART -->
      <div class="panel chart-panel">
        <div class="panel-header">
          <h3>1. ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏ã‡πÄ‡∏£‡∏¢‡πå</h3>
        </div>
        <div class="panel-body">
          <div class="chart-container">
            <canvas ref="barChartRef"></canvas>
          </div>

          <!-- explanation -->
          <div class="panel-explain">
            <p class="explain-title">üìä ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á (Bar Chart) ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?</p>
            <p class="explain-desc">
              ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡πà‡∏á‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì
              ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
            </p>
            <p class="explain-title">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡∏ô‡∏µ‡πâ</p>
            <ul class="explain-list">
              <li>
                <strong>Failure Rate (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)</strong>
                = ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏ã‡πÄ‡∏£‡∏¢‡πå <u>‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</u> ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
                <br><span class="data-source">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å: ‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°/‡∏Å‡∏≤‡∏£‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á</span>
              </li>
              <li>
                <strong>QC Pass Rate (%)</strong>
                = (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö QC <u>‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏£‡∏°‡∏ß‡∏¥‡∏ó‡∏¢‡πå</u> √∑
                ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö QC ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡πâ‡∏ô) √ó 100
                <br><span class="data-source">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å: ‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö QC ‡∏£‡∏≤‡∏¢‡∏£‡∏≠‡∏ö</span>
              </li>
              <li>
                <strong>Recurrent Failure Rate (RFR, %)</strong>
                = (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô <u>‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ã‡πâ‡∏≥</u> ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
                √∑ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô) √ó 100
                <br><span class="data-source">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å: ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- 2) LINE CHART -->
      <div class="panel chart-panel">
        <div class="panel-header">
          <h3>2. ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</h3>
        </div>
        <div class="panel-body">
          <div class="chart-container">
            <canvas ref="lineChartRef"></canvas>
          </div>

          <!-- explanation -->
          <div class="panel-explain">
            <p class="explain-title">üìà ‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏™‡πâ‡∏ô (Line Chart) ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?</p>
            <p class="explain-desc">
              ‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏à‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤
              ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô ‡∏•‡∏î‡∏•‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
            </p>
            <p class="explain-title">‡∏Å‡∏≤‡∏£‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏™‡πâ‡∏ô</p>
            <ul class="explain-list">
              <li>
                ‡πÉ‡∏ä‡πâ‡∏î‡∏π <strong>‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°</strong> ‡∏ß‡πà‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢ (Failure Rate) ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏î‡∏•‡∏á‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
              </li>
              <li>
                ‡∏î‡∏π‡∏ß‡πà‡∏≤ <strong>‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏£‡∏±‡∏á‡∏™‡∏µ (QC Pass Rate)</strong>
                ‡∏°‡∏µ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Ñ‡∏á‡∏ó‡∏µ‡πà ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏¢‡πà‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
              </li>
              <li>
                ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ <strong>Recurrent Failure Rate (RFR)</strong>
                ‡∏°‡∏µ‡∏ä‡πà‡∏ß‡∏á‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏ã‡∏∂‡πà‡∏á‡∏≠‡∏≤‡∏à‡∏ö‡πà‡∏á‡∏ä‡∏µ‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡πâ‡∏ô‡πÄ‡∏´‡∏ï‡∏∏
              </li>
            </ul>
            <p class="explain-title">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</p>
            <p class="explain-desc">
              ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á ‡πÅ‡∏ï‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏î‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô
            </p>
          </div>
        </div>
      </div>

      <!-- 3) PIE CHART -->
      <div class="panel chart-panel">
        <div class="panel-header">
          <h3>3. ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô</h3>
        </div>
        <div class="panel-body">
          <div class="chart-container pie-container">
            <canvas ref="pieChartRef"></canvas>
          </div>

          <!-- explanation -->
          <div class="panel-explain">
            <p class="explain-title">ü•ß ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏á‡∏Å‡∏•‡∏°/‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏ß‡∏á‡∏Å‡∏•‡∏° (Pie Chart) ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?</p>
            <p class="explain-desc">
              ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
              ‡πÇ‡∏î‡∏¢‡πÅ‡∏ö‡πà‡∏á‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ß‡πà‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏´‡∏ô‡∏°‡∏µ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
            </p>
            <p class="explain-title">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Pie Chart</p>
            <ul class="explain-list">
              <li>
                <strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Total Failures)</strong> =
                ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
                <br><span class="data-source">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å: Œ£ Failure Rate ‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
              </li>
              <li>
                <strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á QC ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå (Total QC Failures)</strong> =
                ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö QC ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚àí ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå) ‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
                <br><span class="data-source">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å: Œ£ (QC Total - QC Passed) ‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
              </li>
              <li>
                <strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ã‡πâ‡∏≥ (Total Recurrent Failures)</strong> =
                ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏ã‡πâ‡∏≥‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏±‡πâ‡∏ô (3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ã‡πà‡∏≠‡∏°)
                <br><span class="data-source">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å: Œ£ Recurrent Failures ‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span>
              </li>
              <li>
                ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏° = (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó √∑ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î) √ó 100
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- SUMMARY STRIP -->
      <div class="summary-strip">
        <span class="summary-label">‡∏™‡∏£‡∏∏‡∏õ :</span>
        <span class="summary-text">
          ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
          1) ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏ã‡πÄ‡∏£‡∏¢‡πå (Failure Rate)
          2) ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏£‡∏±‡∏á‡∏™‡∏µ (QC Pass Rate)
          ‡πÅ‡∏•‡∏∞ 3) ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ã‡πâ‡∏≥ (Recurrent Failure Rate; RFR)
          ‡πÇ‡∏î‡∏¢‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á ‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏™‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏ß‡∏á‡∏Å‡∏•‡∏°
        </span>
      </div>

      <!-- ========== HISTORY SECTION ========== -->
      <div class="panel">
        <div class="panel-header">
          <h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
        </div>

        <div class="panel-body history-body">
          <!-- Search Filters -->
          <div class="history-filters">
            <input v-model="filters.device" class="history-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á..." />

            <select v-model="filters.form" class="history-input">
              <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</option>
              <option>dairy check</option>
              <option>monthly check(1 month)</option>
              <option>monthly check(3 month)</option>
              <option>monthly check(6 month)</option>
            </select>

            <input type="date" v-model="filters.date" class="history-input" />

            <button class="history-btn" @click="searchHistory">
              ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            </button>
          </div>

          <!-- Table -->
          <div class="table-responsive mt-2">
            <table class="table table-bordered small history-table">
              <thead class="table-light text-center">
                <tr>
                  <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                  <th>‡∏ú‡∏π‡πâ‡∏ó‡∏≥</th>
                  <th>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</th>
                  <th>‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</th>
                  <th>‡∏ú‡∏•</th>
                  <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="item in history" :key="item.id">
                  <td>{{ item.timestamp }}</td>
                  <td>{{ item.user }}</td>
                  <td>{{ item.device }}</td>
                  <td class="fw-bold">{{ item.form }}</td>
                  <td>
                    <span :class="item.status === 'Pass' ? 'tag-pass' : 'tag-fail'">
                      {{ item.status }}
                    </span>
                  </td>
                  <td>
                    <button class="btn btn-sm btn-outline-primary" @click="openDetail(item)">
                      ‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Pagination -->
          <div class="history-pagination">
            <button class="page-btn" @click="prevPage" :disabled="page === 1">
              ‚Äπ
            </button>
            <span>‡∏´‡∏ô‡πâ‡∏≤ {{ page }}</span>
            <button class="page-btn" @click="nextPage">
              ‚Ä∫
            </button>
          </div>
        </div>
      </div>

      <!-- Detail Modal -->
      <div v-if="modal.open" class="modal-backdrop">
        <div class="modal-card">
          <h3 class="modal-title">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>

          <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> {{ modal.data.timestamp }}</p>
          <p><strong>‡∏ú‡∏π‡πâ‡∏ó‡∏≥:</strong> {{ modal.data.user }}</p>
          <p><strong>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á:</strong> {{ modal.data.device }}</p>
          <p><strong>‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:</strong> {{ modal.data.form }}</p>
          <p><strong>‡∏ú‡∏•:</strong> {{ modal.data.status }}</p>

          <div class="modal-section">
            <strong>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</strong>
            <pre class="modal-json">{{ modal.data.values }}</pre>
          </div>

          <button class="modal-close" @click="modal.open = false">
            ‡∏õ‡∏¥‡∏î
          </button>
        </div>
      </div>
      <!-- ========== END HISTORY SECTION ========== -->
    </div>
  </MainLayout>
</template>

<script setup>
import { ref, onMounted, computed } from 'vue'
import MainLayout from '../components/Layout/MainLayout.vue'
import {
  Chart,
  BarController,
  LineController,
  PieController,
  CategoryScale,
  LinearScale,
  BarElement,
  LineElement,
  PointElement,
  ArcElement,
  Title,
  Tooltip,
  Legend
} from 'chart.js';

// Register Chart.js components
Chart.register(
  BarController,
  LineController,
  PieController,
  CategoryScale,
  LinearScale,
  BarElement,
  LineElement,
  PointElement,
  ArcElement,
  Title,
  Tooltip,
  Legend
);

const currentYear = new Date().getFullYear();

const monthlyData = [
  { label: 'Jan', failures: 5, qcTotal: 50, qcPassed: 46, recurrent: 1 },
  { label: 'Feb', failures: 3, qcTotal: 45, qcPassed: 40, recurrent: 1 },
  { label: 'Mar', failures: 8, qcTotal: 48, qcPassed: 44, recurrent: 2 },
  { label: 'Apr', failures: 6, qcTotal: 52, qcPassed: 47, recurrent: 2 },
  { label: 'May', failures: 4, qcTotal: 55, qcPassed: 50, recurrent: 1 },
  { label: 'Jun', failures: 7, qcTotal: 50, qcPassed: 45, recurrent: 3 },
  { label: 'Jul', failures: 2, qcTotal: 48, qcPassed: 46, recurrent: 0 },
  { label: 'Aug', failures: 5, qcTotal: 52, qcPassed: 49, recurrent: 1 },
  { label: 'Sep', failures: 6, qcTotal: 54, qcPassed: 51, recurrent: 2 },
  { label: 'Oct', failures: 4, qcTotal: 51, qcPassed: 48, recurrent: 1 },
  { label: 'Nov', failures: 3, qcTotal: 49, qcPassed: 47, recurrent: 0 },
  { label: 'Dec', failures: 7, qcTotal: 53, qcPassed: 50, recurrent: 2 }
];

const labels = computed(() => monthlyData.map(m => `${m.label} ${currentYear}`));
const failureRate = computed(() => monthlyData.map(m => m.failures));
const qcPassRate = computed(() =>
  monthlyData.map(m =>
    m.qcTotal > 0 ? Math.round((m.qcPassed / m.qcTotal) * 100) : 0
  )
);
const rfrRate = computed(() =>
  monthlyData.map(m =>
    m.failures > 0 ? Math.round((m.recurrent / m.failures) * 100) : 0
  )
);

const totalFailure = computed(() =>
  monthlyData.reduce((sum, m) => sum + m.failures, 0)
);
const totalQcFail = computed(() =>
  monthlyData.reduce((sum, m) => sum + (m.qcTotal - m.qcPassed), 0)
);
const totalRecurrent = computed(() =>
  monthlyData.reduce((sum, m) => sum + m.recurrent, 0)
);

const barChartRef = ref(null);
const lineChartRef = ref(null);
const pieChartRef = ref(null);

let barChart = null;
let lineChart = null;
let pieChart = null;

onMounted(() => {
  createBarChart();
  createLineChart();
  createPieChart();
});

const createBarChart = () => {
  if (!barChartRef.value) return;
  const ctx = barChartRef.value.getContext('2d');
  barChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels.value,
      datasets: [
        {
          label: 'Failure Rate (‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)',
          data: failureRate.value,
          backgroundColor: 'rgba(255, 99, 132, 0.7)',
          borderColor: 'rgba(255, 99, 132, 1)',
          borderWidth: 1
        },
        {
          label: 'QC Pass Rate (%)',
          data: qcPassRate.value,
          backgroundColor: 'rgba(54, 162, 235, 0.7)',
          borderColor: 'rgba(54, 162, 235, 1)',
          borderWidth: 1
        },
        {
          label: 'Recurrent Failure Rate (%)',
          data: rfrRate.value,
          backgroundColor: 'rgba(255, 206, 86, 0.7)',
          borderColor: 'rgba(255, 206, 86, 1)',
          borderWidth: 1
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      aspectRatio: 2,
      plugins: {
        legend: {
          display: true,
          position: 'top',
          labels: { font: { size: 12 }, padding: 15, usePointStyle: true }
        },
        title: {
          display: true,
          text: '‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Failure Rate, QC Pass Rate ‡πÅ‡∏•‡∏∞ RFR ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô',
          font: { size: 14, weight: 'bold' },
          padding: { top: 10, bottom: 20 }
        },
        tooltip: {
          backgroundColor: 'rgba(0, 0, 0, 0.8)',
          titleFont: { size: 13 },
          bodyFont: { size: 12 },
          padding: 12,
          cornerRadius: 8
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          grid: { color: 'rgba(0, 0, 0, 0.1)', drawBorder: true },
          ticks: { font: { size: 11 } }
        },
        x: {
          grid: { display: false },
          ticks: { font: { size: 11 } }
        }
      }
    }
  });
};

const createLineChart = () => {
  if (!lineChartRef.value) return;
  const ctx = lineChartRef.value.getContext('2d');
  lineChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels.value,
      datasets: [
        {
          label: 'Failure Rate (‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)',
          data: failureRate.value,
          borderColor: 'rgba(255, 99, 132, 1)',
          backgroundColor: 'rgba(255, 99, 132, 0.1)',
          borderWidth: 2,
          tension: 0.3,
          fill: true,
          pointRadius: 4,
          pointHoverRadius: 6,
          pointBackgroundColor: 'rgba(255, 99, 132, 1)',
          pointBorderColor: '#fff',
          pointBorderWidth: 2
        },
        {
          label: 'QC Pass Rate (%)',
          data: qcPassRate.value,
          borderColor: 'rgba(54, 162, 235, 1)',
          backgroundColor: 'rgba(54, 162, 235, 0.1)',
          borderWidth: 2,
          tension: 0.3,
          fill: true,
          pointRadius: 4,
          pointHoverRadius: 6,
          pointBackgroundColor: 'rgba(54, 162, 235, 1)',
          pointBorderColor: '#fff',
          pointBorderWidth: 2
        },
        {
          label: 'Recurrent Failure Rate (%)',
          data: rfrRate.value,
          borderColor: 'rgba(255, 206, 86, 1)',
          backgroundColor: 'rgba(255, 206, 86, 0.1)',
          borderWidth: 2,
          tension: 0.3,
          fill: true,
          pointRadius: 4,
          pointHoverRadius: 6,
          pointBackgroundColor: 'rgba(255, 206, 86, 1)',
          pointBorderColor: '#fff',
          pointBorderWidth: 2
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      aspectRatio: 2,
      plugins: {
        legend: {
          display: true,
          position: 'top',
          labels: { font: { size: 12 }, padding: 15, usePointStyle: true }
        },
        title: {
          display: true,
          text: '‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á Failure Rate, QC Pass Rate ‡πÅ‡∏•‡∏∞ RFR',
          font: { size: 14, weight: 'bold' },
          padding: { top: 10, bottom: 20 }
        },
        tooltip: {
          backgroundColor: 'rgba(0, 0, 0, 0.8)',
          titleFont: { size: 13 },
          bodyFont: { size: 12 },
          padding: 12,
          cornerRadius: 8
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          grid: { color: 'rgba(0, 0, 0, 0.1)', drawBorder: true },
          ticks: { font: { size: 11 } }
        },
        x: {
          grid: { color: 'rgba(0, 0, 0, 0.05)' },
          ticks: { font: { size: 11 } }
        }
      }
    }
  });
};

const createPieChart = () => {
  if (!pieChartRef.value) return;
  const ctx = pieChartRef.value.getContext('2d');
  pieChart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: [
        `‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${totalFailure.value} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)`,
        `QC ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå (${totalQcFail.value} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)`,
        `‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ã‡πâ‡∏≥ (${totalRecurrent.value} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)`
      ],
      datasets: [
        {
          data: [totalFailure.value, totalQcFail.value, totalRecurrent.value],
          backgroundColor: [
            'rgba(255, 99, 132, 0.8)',
            'rgba(54, 162, 235, 0.8)',
            'rgba(255, 206, 86, 0.8)'
          ],
          borderColor: [
            'rgba(255, 99, 132, 1)',
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)'
          ],
          borderWidth: 2,
          hoverOffset: 15
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      aspectRatio: 1.5,
      plugins: {
        legend: {
          display: true,
          position: 'right',
          labels: {
            font: { size: 12 },
            padding: 15,
            usePointStyle: true,
            pointStyle: 'circle'
          }
        },
        title: {
          display: true,
          text: '‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô',
          font: { size: 14, weight: 'bold' },
          padding: { top: 10, bottom: 20 }
        },
        tooltip: {
          backgroundColor: 'rgba(0, 0, 0, 0.8)',
          titleFont: { size: 13 },
          bodyFont: { size: 12 },
          padding: 12,
          cornerRadius: 8,
          callbacks: {
            label: function (context) {
              const label = context.label || '';
              const value = context.parsed || 0;
              const total = context.dataset.data.reduce((a, b) => a + b, 0);
              const percentage = ((value / total) * 100).toFixed(1);
              return `${label}: ${percentage}%`;
            }
          }
        }
      }
    }
  });
};

// History section data
const filters = ref({
  device: '',
  form: '',
  date: ''
})

const page = ref(1)

const history = ref([
  {
    id: 1,
    timestamp: '2025-02-01 10:20',
    user: 'John Doe',
    device: 'X-Ray Model A / Room 101',
    form: 'F3',
    status: 'Pass',
    values: '{ "brightness": 220, "contrast": 180 }'
  },
  {
    id: 2,
    timestamp: '2025-02-03 09:10',
    user: 'Jane Smith',
    device: 'X-Ray Model B / Room 102',
    form: 'F7-1',
    status: 'Fail',
    values: '{ "alignment": "3.5¬∞", "limit": "3¬∞" }'
  }
])

const modal = ref({
  open: false,
  data: {}
})

const openDetail = (item) => {
  modal.value.data = item
  modal.value.open = true
}

const searchHistory = () => {
  console.log('‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ filter:', filters.value)
}

const nextPage = () => {
  page.value++
}

const prevPage = () => {
  if (page.value > 1) page.value--
}
</script>

<style scoped>
.page {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.page-title {
  margin: 0;
  font-size: 1.8rem;
  font-weight: 700;
  color: #1f2937;
}

/* PANEL BASE */
.panel {
  background: #ffffff;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  transition: box-shadow 0.3s ease;
}

.panel.chart-panel:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.panel-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 16px 20px;
}

.panel-header h3 {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  letter-spacing: 0.3px;
}

.panel-body {
  padding: 24px;
}

/* CHART CONTAINER */
.chart-container {
  background: #f9fafb;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  border: 1px solid #e5e7eb;
}

.pie-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 400px;
}

/* EXPLANATION BLOCK */
.panel-explain {
  margin-top: 16px;
  padding: 16px 18px;
  border-radius: 12px;
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  border-left: 4px solid #f59e0b;
  font-size: 0.9rem;
  color: #78350f;
}

.explain-title {
  margin: 0 0 8px;
  font-weight: 700;
  font-size: 1rem;
  color: #92400e;
}

.explain-desc {
  margin: 0 0 12px;
  line-height: 1.6;
  color: #78350f;
}

.explain-list {
  margin: 8px 0 0;
  padding-left: 24px;
  line-height: 1.7;
}

.explain-list li {
  margin-bottom: 10px;
}

.explain-list li strong {
  color: #92400e;
  font-weight: 600;
}

.data-source {
  display: inline-block;
  margin-top: 4px;
  font-size: 0.82rem;
  color: #a16207;
  font-style: italic;
}

/* SUMMARY STRIP */
.summary-strip {
  margin-top: 8px;
  padding: 16px 20px;
  border-radius: 12px;
  background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
  border-left: 4px solid #3b82f6;
  display: flex;
  gap: 10px;
  font-size: 0.95rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.summary-label {
  font-weight: 700;
  color: #1e40af;
}

.summary-text {
  flex: 1;
  line-height: 1.6;
  color: #1e3a8a;
}

/* ========== HISTORY SECTION STYLES ========== */
.history-body {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.history-filters {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.history-input {
  padding: 6px 10px;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  font-size: 0.9rem;
}

.history-btn {
  background: var(--purple-main);
  color: white;
  border: none;
  padding: 6px 16px;
  border-radius: 8px;
  cursor: pointer;
}

.tag-pass {
  background: #10b981;
  color: white;
  padding: 2px 8px;
  border-radius: 6px;
}

.tag-fail {
  background: #ef4444;
  color: white;
  padding: 2px 8px;
  border-radius: 6px;
}

.history-pagination {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding: 6px;
}

.page-btn {
  background: #e5e7eb;
  border: none;
  padding: 4px 12px;
  border-radius: 6px;
}

/* Modal */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
}

.modal-card {
  background: white;
  width: 480px;
  max-width: 90vw;
  padding: 18px;
  border-radius: 14px;
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.2);
}

.modal-title {
  margin: 0 0 10px;
  font-size: 1.1rem;
}

.modal-json {
  background: #f3f4f6;
  padding: 8px;
  border-radius: 8px;
  max-height: 180px;
  overflow-y: auto;
  font-size: 0.8rem;
}

.modal-close {
  margin-top: 14px;
  padding: 8px 14px;
  background: var(--purple-main);
  color: white;
  border: none;
  border-radius: 8px;
  width: 100%;
  cursor: pointer;
}

/* RESPONSIVE */
@media (max-width: 768px) {
  .page-title {
    font-size: 1.5rem;
  }

  .panel-header h3 {
    font-size: 1rem;
  }

  .chart-container {
    padding: 15px;
  }

  .panel-body {
    padding: 16px;
  }

  .explain-list {
    padding-left: 18px;
    font-size: 0.85rem;
  }
}
</style>
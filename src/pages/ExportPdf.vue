<template>
  <MainLayout>
    <div class="page">
      <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
      <div v-if="!isPreviewVisible" class="form-section-wrapper">
        <!-- ‡πÅ‡∏ñ‡∏ö‡∏ö‡∏≤‡∏£‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô -->
        <div class="page-header">
          <span class="page-header-title">
            X-ray Maintenance Checklist
          </span>
        </div>

        <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏° (‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏•‡∏¢) -->
        <div class="form-panel">
          <form class="form">
            <!-- X-ray machine -->
           <!-- Checklist type -->
        <div class="form-group">
        <label for="checklistType">Checklist type</label>
        <div class="input-shell">
        <div class="select-wrapper">
        <select id="checklistType" v-model="checklistType">
        <option value="" disabled>Checklist type</option>

        <!-- ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ -->
        <option value="daily">Daily</option>
        <option value="1m">1 month</option>
        <option value="3m">3 months</option>
        <option value="6m">6 months</option>

        <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á -->
        <option value="xrayCare">
          ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏ã‡πÄ‡∏£‡∏¢‡πå
        </option>
        <option value="erasureIP">
          ‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÅ‡∏ú‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏ó (Erasure of Imaging Plate)
        </option>
        <option value="displayQC">
          ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏à‡∏≠‡∏†‡∏≤‡∏û (Display monitor)
        </option>
        <option value="xrayRecord">
          ‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏ã‡πÄ‡∏£‡∏¢‡πå
        </option>
        <option value="uniformity">
          ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û (Measured Uniformity)
        </option>
        <option value="exposureIndex">
          ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏£‡∏±‡∏á‡∏™‡∏µ (Consistency of Exposure Index)
        </option>
        <option value="collimatorAlignment">
          ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Collimator and Beam Alignment
        </option>
        <option value="collimatorAlignmentDrBucky">
          ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö Collimator and Beam Alignment
          ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏Å‡∏£‡∏ì‡∏µ‡πÅ‡∏ú‡πà‡∏ô DR ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ö Bucky (‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ñ‡∏≠‡∏î‡∏≠‡∏≠‡∏Å‡πÑ‡∏î‡πâ)
        </option>
        <option value="darkNoiseCR">
          ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏°‡∏∑‡∏î (Dark Noise) ‡∏£‡∏∞‡∏ö‡∏ö CR
        </option>
        <option value="darkNoiseDR">
          ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏°‡∏∑‡∏î (Dark Noise) ‡∏£‡∏∞‡∏ö‡∏ö DR
        </option>
        <option value="leadApron">
          ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ï‡∏∞‡∏Å‡∏±‡πà‡∏ß‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡∏£‡∏≠‡∏¢‡πÅ‡∏ï‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ï‡∏∞‡∏Å‡∏±‡πà‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏±‡∏á‡∏™‡∏µ‡πÄ‡∏≠‡∏Å‡∏ã
        </option>
        <option value="lightBox">
          ‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏™‡∏á‡πÑ‡∏ü
        </option>
        <option value="patientThickness">
          ‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
        </option>
        <option value="repeatRate">
          ‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏ã‡πâ‡∏≥
        </option>
        <option value="usgBmode">
          ‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏±‡∏•‡∏ï‡∏£‡∏≤‡∏ã‡∏≤‡∏ß‡∏î‡πå : B-mode QC Test
        </option>
      </select>
      <span class="arrow">‚ñæ</span>
    </div>
  </div>
</div>

            <!-- Checklist type -->
            <div class="form-group">
              <label for="checklistType">Checklist type</label>
              <div class="input-shell">
                <div class="select-wrapper">
                  <select id="checklistType" v-model="checklistType">
                    <option value="" disabled>Checklist type</option>
                    <option value="daily">Daily</option>
                    <option value="1m">1 month</option>
                    <option value="3m">3 months</option>
                    <option value="6m">6 months</option>
                    <option value="thickness">‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡∏ú‡πâ‡∏π‡∏õ‡πà‡∏ß‡∏¢</option>
                    <option value="usg">‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏±‡∏•‡∏ï‡∏£‡∏≤‡∏ã‡∏≤‡∏ß‡∏î‡πå</option>
                  </select>
                  <span class="arrow">‚ñæ</span>
                </div>
              </div>
            </div>

            <!-- Date -->
            <div class="form-group">
              <label for="date">Date</label>
              <div class="input-shell">
                <div class="date-wrapper">
                  <input
                    id="date"
                    v-model="date"
                    type="text"
                    placeholder="DD/MM/YYYY"
                    maxlength="10"
                    @input="formatDate"
                    @keypress="onlyNumber"
                  />
                  <button
                    type="button"
                    class="date-icon"
                    @click.stop="openCalendarFromInput"
                  >
                    üìÖ
                  </button>
                </div>
              </div>
            </div>
          </form>

          <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå -->
          <div class="preview-wrapper">
            <button class="btn-primary" @click="showPreview">
              ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå
            </button>
          </div>
        </div>
      </div>

      <!-- ‡∏õ‡πá‡∏≠‡∏õ‡∏≠‡∏±‡∏û‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô -->
      <div
        v-if="isCalendarVisible"
        class="calendar-popup-overlay"
        @click="isCalendarVisible = false"
      >
        <div class="calendar-popup-box" @click.stop>
          <div class="calendar-header">
            <button class="nav-btn" @click.stop="changeMonth(-1)">&lt;</button>
            <span class="month-title">{{ currentMonthYear }}</span>
            <button class="nav-btn" @click.stop="changeMonth(1)">&gt;</button>
          </div>

          <div class="calendar-grid">
            <div class="weekday" v-for="d in weekdays" :key="d">
              {{ d }}
            </div>

            <div
              v-for="cell in daysGrid"
              :key="cell.key"
              class="day-cell"
              :class="{
                'is-empty': !cell.day,
                'is-today': cell.isToday,
                'is-selected': cell.isSelected
              }"
              @click="cell.day ? selectDate(cell.date) : null"
            >
              <div class="day-number">
                <span v-if="cell.day">{{ cell.day }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ‡∏´‡∏ô‡πâ‡∏≤ 2 : ‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
      <div v-if="isPreviewVisible" class="preview-section-wrapper">
        <div class="preview-inner">
          <!-- ‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö -->
          <button class="back-btn" @click="backToForm">
            ‚Üê
          </button>

          <!-- ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© A4 -->
          <div class="a4-paper">
            <h3 class="preview-title">
              ‡∏Å‡∏≤‡∏£ Maintenance ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏ã‡πÄ‡∏£‡∏¢‡πå‡∏£‡∏±‡∏á‡∏™‡∏µ‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢
            </h3>

            <div class="info-chips-row">
              <div class="info-chip">
                <span class="info-label">X-ray machine</span>
                <span class="info-value">{{ displayedMachine }}</span>
              </div>

              <div class="info-chip">
                <span class="info-label">Checklist type</span>
                <span class="info-value">{{ displayedChecklistType }}</span>
              </div>

              <div class="info-chip">
                <span class="info-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ì ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</span>
                <span class="info-value">{{ displayedDate }}</span>
              </div>
            </div>

            <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏´‡∏ç‡πà -->
            <div class="detail-box">
              <div class="detail-area">
                <p class="detail-label-inside">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</p>
                <p class="placeholder-content">
                  [‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Daily/Monthly ‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£]
                </p>
              </div>
            </div>

            <!-- ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô -->
            <div class="signature-section">
              <p class="signature-line">(..............................................)</p>
              <p class="signature-label">‡∏ú‡∏π‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö</p>
              <p class="signature-line">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á..............................................</p>
            </div>
          </div>

          <!-- ‡∏õ‡∏∏‡πà‡∏° Export -->
          <div class="export-btn-wrapper">
            <button class="btn-primary btn-shadow" @click="exportFile">
              Export File
            </button>
          </div>
        </div>
      </div>
    </div>
  </MainLayout>
</template>

<script setup>
import { ref, computed } from 'vue'
import MainLayout from '../components/Layout/MainLayout.vue'

const machine = ref('')
const checklistType = ref('')
const date = ref('')

const isPreviewVisible = ref(false)
const isCalendarVisible = ref(false)

const today = new Date()
const currentMonth = ref(today.getMonth())
const currentYear = ref(today.getFullYear())

const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']
const monthNames = [
  'January',
  'February',
  'March',
  'April',
  'May',
  'June',
  'July',
  'August',
  'September',
  'October',
  'November',
  'December'
]

const currentMonthYear = computed(() => {
  return `${monthNames[currentMonth.value]} ${currentYear.value}`
})

const parseDateString = (str) => {
  const parts = str.split('/')
  if (parts.length !== 3) return null
  const [dd, mm, yyyy] = parts.map(Number)
  if (!dd || !mm || !yyyy) return null
  const d = new Date(yyyy, mm - 1, dd)
  if (
    d.getFullYear() !== yyyy ||
    d.getMonth() !== mm - 1 ||
    d.getDate() !== dd
  ) {
    return null
  }
  return d
}

const selectedDate = computed(() => parseDateString(date.value))

const daysGrid = computed(() => {
  const cells = []
  const firstDayOfMonth = new Date(currentYear.value, currentMonth.value, 1).getDay()
  const daysInMonth = new Date(currentYear.value, currentMonth.value + 1, 0).getDate()

  for (let i = 0; i < firstDayOfMonth; i++) {
    cells.push({
      key: `empty-${i}`,
      day: null,
      isToday: false,
      isSelected: false
    })
  }

  for (let d = 1; d <= daysInMonth; d++) {
    const dateObj = new Date(currentYear.value, currentMonth.value, d)

    const isToday =
      d === today.getDate() &&
      currentMonth.value === today.getMonth() &&
      currentYear.value === today.getFullYear()

    let isSelected = false
    if (selectedDate.value) {
      isSelected =
        d === selectedDate.value.getDate() &&
        currentMonth.value === selectedDate.value.getMonth() &&
        currentYear.value === selectedDate.value.getFullYear()
    }

    cells.push({
      key: `day-${d}`,
      day: d,
      date: dateObj,
      isToday,
      isSelected
    })
  }

  const totalCells = 42
  const cellsToFill = totalCells - cells.length
  for (let i = 0; i < cellsToFill; i++) {
    cells.push({
      key: `empty-post-${i}`,
      day: null,
      isToday: false,
      isSelected: false
    })
  }

  return cells.slice(0, 42)
})

const changeMonth = (delta) => {
  const newDate = new Date(currentYear.value, currentMonth.value + delta, 1)
  currentMonth.value = newDate.getMonth()
  currentYear.value = newDate.getFullYear()
}

const selectDate = (dateObj) => {
  const day = String(dateObj.getDate()).padStart(2, '0')
  const month = String(dateObj.getMonth() + 1).padStart(2, '0')
  const year = dateObj.getFullYear()
  date.value = `${day}/${month}/${year}`
  isCalendarVisible.value = false
}

const openCalendarFromInput = () => {
  const parsed = parseDateString(date.value)
  if (parsed) {
    currentMonth.value = parsed.getMonth()
    currentYear.value = parsed.getFullYear()
  } else {
    currentMonth.value = today.getMonth()
    currentYear.value = today.getFullYear()
  }
  isCalendarVisible.value = true
}

const onlyNumber = (e) => {
  const char = String.fromCharCode(e.which)
  if (!/[0-9]/.test(char)) {
    e.preventDefault()
  }
}

const formatDate = () => {
  let value = date.value.replace(/\D/g, '')
  value = value.substring(0, 8)

  if (value.length > 2 && value.length <= 4) {
    value = value.substring(0, 2) + '/' + value.substring(2)
  } else if (value.length > 4) {
    value =
      value.substring(0, 2) +
      '/' +
      value.substring(2, 4) +
      '/' +
      value.substring(4)
  }

  date.value = value
}

const showPreview = () => {
  isPreviewVisible.value = true
}

const backToForm = () => {
  isPreviewVisible.value = false
}

const exportFile = () => {
  alert('Exporting PDF file...')
}

const machineOptions = {
  'shimazu-aaa': 'x-ray shimazu ‡∏£‡∏∏‡πà‡∏ô AAA',
  'shimazu-bbb': 'x-ray shimazu ‡∏£‡∏∏‡πà‡∏ô BBB',
  'shimazu-ccc': 'x-ray shimazu ‡∏£‡∏∏‡πà‡∏ô CCC'
}

const checklistTypeOptions = {
  daily: 'Daily Check',
  '1m': '1 month',
  '3m': '3 months',
  '6m': '6 months',
  thickness: '‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡∏ú‡πâ‡∏π‡∏õ‡πà‡∏ß‡∏¢',
  usg: '‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏±‡∏•‡∏ï‡∏£‡∏≤‡∏ã‡∏≤‡∏ß‡∏î‡πå'
}

const displayedMachine = computed(() => {
  return machineOptions[machine.value] || 'X-ray machine (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)'
})

const displayedChecklistType = computed(() => {
  return checklistTypeOptions[checklistType.value] || 'Checklist type (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)'
})

const displayedDate = computed(() => {
  if (!date.value || date.value.length !== 10) return '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà'
  const [day, monthIndex, year] = date.value.split('/').map(Number)
  const monthName = monthNames[monthIndex - 1]
  if (!monthName) return '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà'
  return `${day} ${monthName} ${year}`
})
</script>

<style scoped>
:root {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

.page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 16px 32px;
  /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡∏≤ + gradient */
  /* background: radial-gradient(circle at top, #e0e7ff 0, #f4f4f5 50%, #ffffff 100%); */

  /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤‡∏ß‡∏•‡πâ‡∏ß‡∏ô */
  background: radial-gradient(circle at top, #e0e7ff 0, #ffffff 40%, #ffffff 100%);
}


/* --------- Header bar --------- */
.page-header {
  max-width: 640px;
  width: 100%;
  margin: 15 auto;              /* ‡∏ä‡∏¥‡∏î‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á page-section */
  padding: 12px 24px;
  border-radius: 24px 24px 0 0; /* ‡πÇ‡∏Ñ‡πâ‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
  background: #5b32d6;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  color: #ffffff;
  font-weight: 600;
  box-shadow: 0 10px 18px rgba(91, 50, 214, 0.35);
}

.page-header-title {
  font-size: 0.95rem;
}

.form-section-wrapper,
.preview-section-wrapper {
  max-width: 640px;
  width: 100%;
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á) */
.form-panel {
  background: rgba(255, 255, 255, 0.96);
  border-radius: 0 0 24px 24px;   /* ‡πÇ‡∏Ñ‡πâ‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö .page-header */
  padding: 32px 26px 26px;
  margin: 0 auto;
  box-shadow:
    0 18px 40px rgba(15, 23, 42, 0.08),
    0 0 0 1px rgba(148, 163, 184, 0.25);
  backdrop-filter: blur(12px);
}


.form {
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.form-group label {
  display: block;
  font-size: 0.85rem;
  margin-bottom: 6px;
  color: #4b5563;
  font-weight: 600;
}

.input-shell {
  border-radius: 18px;
  padding: 3px 4px;
  background: #f9fafb;
  border: 1px solid transparent;
  transition: all 0.18s ease;
}

.input-shell:focus-within {
  border-color: #6366f1;
  box-shadow: 0 0 0 1px rgba(129, 140, 248, 0.35);
  background: #ffffff;
}

/* select */
.select-wrapper {
  position: relative;
}

select {
  width: 100%;
  border-radius: 14px;
  border: none;
  padding: 10px 32px 10px 14px;
  font-size: 0.9rem;
  background: transparent;
  cursor: pointer;
  outline: none;
  color: #111827;
}

select:disabled {
  cursor: not-allowed;
}

.arrow {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.7rem;
  pointer-events: none;
  color: #6b7280;
}

/* date input */
.date-wrapper {
  display: flex;
  align-items: center;
  border-radius: 14px;
  padding-right: 2px;
}

.date-wrapper input {
  border: none;
  outline: none;
  border-radius: 14px;
  padding: 10px 12px 10px 14px;
  font-size: 0.9rem;
  flex: 1;
  background: transparent;
  color: #111827;
}

.date-wrapper input::placeholder {
  color: #9ca3af;
}

.date-icon {
  border: none;
  background: #eef2ff;
  border-radius: 999px;
  width: 30px;
  height: 30px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  margin-right: 4px;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
}

.date-icon:hover {
  transform: translateY(-1px);
  background: #e0e7ff;
  box-shadow: 0 6px 14px rgba(129, 140, 248, 0.5);
}

/* ‡∏õ‡∏∏‡πà‡∏° primary */
.btn-primary {
  padding: 9px 26px;
  border-radius: 999px;
  border: none;
  background-image: linear-gradient(135deg, #4f46e5, #8b5cf6);
  color: #f9fafb;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  box-shadow: 0 10px 25px rgba(79, 70, 229, 0.35);
  transition: transform 0.16s ease, box-shadow 0.16s ease, filter 0.16s ease;
}

.btn-primary:hover {
  transform: translateY(-1px);
  filter: brightness(1.03);
  box-shadow: 0 14px 30px rgba(79, 70, 229, 0.45);
}

.btn-primary:active {
  transform: translateY(0);
  box-shadow: 0 8px 18px rgba(55, 48, 163, 0.4);
}

.btn-shadow {
  box-shadow: 0 12px 30px rgba(31, 41, 55, 0.28);
}

/* ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå */
.preview-wrapper {
  margin-top: 18px;
  display: flex;
  justify-content: flex-end;
}

/* ‡∏õ‡πá‡∏≠‡∏õ‡∏≠‡∏±‡∏û‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô */
.calendar-popup-overlay {
  position: fixed;
  inset: 0;
  background-color: rgba(15, 23, 42, 0.35);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 900;
}

.calendar-popup-box {
  background: #ffffff;
  border-radius: 20px;
  padding: 16px 18px 18px;
  width: 320px;
  box-shadow:
    0 22px 50px rgba(15, 23, 42, 0.4),
    0 0 0 1px rgba(148, 163, 184, 0.4);
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.month-title {
  font-weight: 600;
  font-size: 0.9rem;
  color: #111827;
}

.nav-btn {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: none;
  background-color: #eef2ff;
  font-size: 0.85rem;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s ease, transform 0.15s ease;
}

.nav-btn:hover {
  background-color: #e0e7ff;
  transform: translateY(-1px);
}

/* grid ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô */
.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  row-gap: 6px;
  column-gap: 4px;
  font-size: 0.8rem;
  text-align: center;
}

.weekday {
  font-weight: 600;
  color: #6b7280;
}

.day-cell {
  height: 32px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.day-cell.is-empty {
  pointer-events: none;
}

.day-number span {
  display: inline-flex;
  width: 26px;
  height: 26px;
  border-radius: 999px;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.15s ease, color 0.15s ease, transform 0.1s ease;
}

.day-number span:hover {
  background-color: #e5e7eb;
}

/* ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ */
.day-cell.is-today .day-number span {
  border: 1px solid #6366f1;
}

/* ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
.day-cell.is-selected .day-number span {
  background-color: #4f46e5;
  color: #ffffff;
  transform: translateY(-1px);
}

/* ---------------- preview ‡∏´‡∏ô‡πâ‡∏≤ 2 ---------------- */
.preview-section-wrapper {
  max-width: 680px;
  width: 100%;
}

.preview-inner {
  position: relative;
}

/* ‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö */
.back-btn {
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: none;
  background-color: #ffffff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  cursor: pointer;
  position: absolute;
  top: -38px;
  left: 2px;
  box-shadow: 0 12px 25px rgba(15, 23, 42, 0.3);
  transition: transform 0.16s ease, box-shadow 0.16s ease;
}

.back-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 16px 32px rgba(15, 23, 42, 0.38);
}

/* ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© A4 */
.a4-paper {
  width: 100%;
  max-width: 595px;
  min-height: 842px;
  border-radius: 20px;
  border: 1px solid #e5e7eb;
  background: linear-gradient(180deg, #ffffff, #f9fafb);
  margin: 0 auto;
  padding: 20px 40px 36px;
  box-shadow:
    0 26px 60px rgba(15, 23, 42, 0.28),
    0 0 0 1px rgba(148, 163, 184, 0.4);
}

.preview-title {
  text-align: center;
  margin-bottom: 18px;
  font-size: 1.02rem;
  white-space: nowrap;
  color: #111827;
  font-weight: 700;
}

/* ‡πÅ‡∏ñ‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
.info-chips-row {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 18px;
}

.info-chip {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding: 6px 10px;
  border-radius: 10px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  font-size: 0.78rem;
}

.info-label {
  color: #6b7280;
}

.info-value {
  color: #111827;
  font-weight: 500;
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏´‡∏ç‡πà */
.detail-box {
  margin-top: 8px;
}

.detail-area {
  border-radius: 14px;
  border: 1px dashed #9ca3af;
  min-height: 380px;
  padding: 10px 12px;
  background: #fefefe;
}

.detail-label-inside {
  font-size: 0.85rem;
  margin-bottom: 4px;
  font-weight: 600;
}

.placeholder-content {
  font-size: 0.8rem;
  color: #6b7280;
  margin-top: 6px;
}

/* ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô */
.signature-section {
  margin-top: 60px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.signature-line,
.signature-label {
  width: 260px;
  text-align: center;
  margin: 4px 0;
  font-size: 0.78rem;
}

/* ‡∏õ‡∏∏‡πà‡∏° Export */
.export-btn-wrapper {
  display: flex;
  justify-content: flex-end;
  margin-top: 14px;
}

/* --------- responsive --------- */
@media (max-width: 640px) {
  .form-panel {
    padding: 24px 18px 20px;
  }

  .a4-paper {
    padding: 16px 18px 26px;
    min-height: 700px;
  }

  .preview-title {
    white-space: normal;
  }

  .page-header {
    padding: 8px 12px;
  }
}
</style>


<template>
  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏•‡πà‡∏á ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô -->
  <div class="print-root">
    <!-- ‡∏õ‡∏∏‡πà‡∏° Print (‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå) -->
    <div class="print-toolbar">
      <button class="btn-print" @click="handlePrint">
        üñ® ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å F11
      </button>
    </div>

    <!-- ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© A4 -->
    <div class="sheet-a4">
      <div class="sheet-inner">
        <!-- ‡∏´‡∏±‡∏ß‡∏ü‡∏≠‡∏£‡πå‡∏° -->
        <div class="header-main">
          <div class="title-main">
            ‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å F11 : ‡πÅ‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
          </div>
        </div>

        <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏ï‡∏≤‡∏°‡∏ü‡∏≠‡∏£‡πå‡∏° -->
        <table class="f11-table">
          <thead>
            <tr>
              <th class="col-region">
                ‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏â‡∏≤‡∏¢‡∏£‡∏±‡∏á‡∏™‡∏µ
              </th>
              <th class="col-small">
                ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πà‡∏≤‡∏á‡∏®‡∏±‡∏Å‡∏¢‡πå<br />
                (kV)
              </th>
              <th class="col-small">
                ‡∏Ñ‡πà‡∏≤‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡πÑ‡∏ü‡∏ü‡πâ‡∏≤<br />
                ‡∏Å‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ (mAs)
              </th>
              <th class="col-small">
                ‡∏£‡∏∞‡∏¢‡∏∞‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏ñ‡∏∂‡∏á<br />
                ‡∏ï‡∏±‡∏ß‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏û (cm)<br />
                (FTD)
              </th>
              <th class="col-small">
                ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤<br />
                ‡∏Ç‡∏≠‡∏á‡∏≠‡∏ß‡∏±‡∏¢‡∏ß‡∏∞ (cm)<br />
                (t‚Çö)
              </th>
              <th class="col-small">
                ‡∏£‡∏∞‡∏¢‡∏∞<br />
                Bucky (cm)
              </th>
            </tr>
          </thead>

          <tbody>
            <tr
              v-for="(row, index) in record.rows"
              :key="index"
            >
              <td class="align-left">
                {{ row.region }}
              </td>
              <td>
                {{ row.kv }}
              </td>
              <td>
                {{ row.mas }}
              </td>
              <td>
                {{ row.ftd }}
              </td>
              <td>
                {{ row.tp }}
              </td>
              <td>
                {{ row.bucky }}
              </td>
            </tr>
          </tbody>
        </table>

        <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (‡πÉ‡∏´‡πâ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á PDF) -->
        <div class="bottom-space"></div>

        <!-- ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö -->
        <div class="sign-block">
          <div class="sign-line">
            ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠......................................................................................‡∏ú‡∏π‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö
          </div>
          <div class="sign-line">
            (.................................................................................)
          </div>
          <div class="sign-line">
            ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á..................................................................................
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { useRoute } from 'vue-router'

const route = useRoute()

// ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö F11 (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)
// ‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô
const record = ref({
  id: route.params.id || null,
  rows: [
    { region: 'Chest PA', kv: '', mas: '', ftd: '', tp: '', bucky: '' },
    { region: 'L-Spine AP', kv: '', mas: '', ftd: '', tp: '', bucky: '' },
    { region: 'L-Spine LAT', kv: '', mas: '', ftd: '', tp: '', bucky: '' },
    { region: 'Abdomen AP', kv: '', mas: '', ftd: '', tp: '', bucky: '' },
    { region: 'Pelvis AP', kv: '', mas: '', ftd: '', tp: '', bucky: '' },
    { region: 'Skull AP/PA', kv: '', mas: '', ftd: '', tp: '', bucky: '' },
    { region: 'Skull LAT', kv: '', mas: '', ftd: '', tp: '', bucky: '' }
  ]
})

function handlePrint () {
  // ‡πÄ‡∏õ‡∏¥‡∏î dialog ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå (Chrome/Edge ‡∏à‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏û Google Print)
  window.print()
}

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å Backend ‡∏ï‡∏≤‡∏° id
onMounted(async () => {
  const id = route.params.id

  if (!id) return

  try {
    // ‡πÅ‡∏Å‡πâ URL ‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á response ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö API ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á
    // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö (mock):
    // {
    //   id: '123',
    //   rows: [
    //     { region: 'Chest PA', kv: '110', mas: '4', ftd: '180', tp: '22', bucky: '0' },
    //     ...
    //   ]
    // }

    // const res = await fetch(`/api/prints/f11/${id}`)
    // const data = await res.json()
    // record.value = data

  } catch (err) {
    console.error('‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• F11 ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', err)
  }
})
</script>

<style scoped>
@import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');

* {
  font-family: 'TH Sarabun New', 'Sarabun', Tahoma, sans-serif !important;
}

/* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á ‡∏ô‡∏≠‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© */
.print-root {
  background: #111827;
  min-height: 100vh;
  padding: 16px 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* ‡∏õ‡∏∏‡πà‡∏° print */
.print-toolbar {
  margin-bottom: 16px;
}

.btn-print {
  padding: 6px 20px;
  background: #ffffff;
  border-radius: 999px;
  border: 1px solid #4b5563;
  cursor: pointer;
  font-size: 16px;
}

/* ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© A4 */
.sheet-a4 {
  width: 210mm;
  min-height: 297mm;
  background: #ffffff;
  box-shadow: 0 0 4mm rgba(0, 0, 0, 0.35);
  display: flex;
  justify-content: center;
}

.sheet-inner {
  width: 180mm;
  padding: 18mm 0 14mm;
  font-size: 14pt;
}

/* ‡∏´‡∏±‡∏ß‡∏ü‡∏≠‡∏£‡πå‡∏° */
.header-main {
  text-align: center;
  margin-bottom: 8mm;
}

.title-main {
  font-weight: 700;
  font-size: 18pt;
}

/* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å */
.f11-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  font-size: 13pt;
}

.f11-table th,
.f11-table td {
  border: 0.4pt solid #000;
  padding: 2mm 1mm;
  text-align: center;
  vertical-align: middle;
}

.col-region {
  width: 50mm;
}

.col-small {
  width: 26mm;
}

.align-left {
  text-align: left;
  padding-left: 3mm;
}

/* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô (‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á PDF) */
.bottom-space {
  height: 22mm;
}

/* ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö */
.sign-block {
  margin-top: 6mm;
  font-size: 14pt;
}

.sign-line {
  margin-bottom: 2mm;
}

/* ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ï‡∏≠‡∏ô print */
@page {
  size: A4 portrait;
  margin: 10mm;
}

@media print {
  .print-toolbar {
    display: none;
  }

  .print-root {
    background: #ffffff;
    padding: 0;
  }

  .sheet-a4 {
    box-shadow: none;
    width: auto;
    min-height: auto;
  }
}
</style>
